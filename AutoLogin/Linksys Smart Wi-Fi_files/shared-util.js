window.RAINIER=window.RAINIER||{};RAINIER.shared=RAINIER.shared||{};RAINIER.shared.account=RAINIER.shared.account||(function(){return{verifyReason:{alreadyUpdated:"alreadyUpdated",unhandled:"unhandled"},verify:function(b,a,c){a=(typeof a!=="function")?function(){return false}:a;c=(typeof c!=="function")?function(){return false}:c;var e=RAINIER.shared.account.verifyReason;var d={};d.verification={};d.verification.status="ACCEPTED";d.verification.parameters=[];RAINIER.cloud.send({url:"/cloud/user-service/rest/verifications/"+b+"/status/",type:"PUT",data:d,cb:a,cbError:function(f){var g=RAINIER.util.parseJSON(f.responseText);if(g&&g.errors[0].error.code==="VERIFICATION_STATUS_ALREADY_UPDATED"){return c(e.alreadyUpdated)}else{return c(e.unhandled)}}})}}}());RAINIER.shared.pingTests=(function(){var a={url:"http://connect.linksys.com/test.js",dataType:"script",init:function(){window.CISCO=window.CISCO||{};RAINIER.connectLinksysAnswer=0;window.CISCO.connectLinksysAnswer=0},test:function(){var e=RAINIER.connectLinksysAnswer||window.CISCO.connectLinksysAnswer;return e>0}};var b={url:"/cloud/ping.png",test:function(e){var f=/content-type:\s+image\/png/i;return f.test(e.getAllResponseHeaders())}};var c=[];c.push(b);if(!/https/i.test(window.location.protocol)){c.push(a)}function d(k,m,h){var g=window.$ajax||$.ajax,f=0,l=0;function e(i){return function(n){if(n.status===200){if(i.test(n)){f++;m(i,f,l)}else{l++;h(i,f,l)}}else{l++;h(i,f,l)}}}for(var j=0;j<k.length;j++){if(k[j].init){k[j].init()}g({url:RAINIER.shared.util.uniqueURL(k[j].url),dataType:k[j].dataType,timeout:15000,complete:e(k[j])})}}return{allTests:c,start:d}}());RAINIER.shared.util=RAINIER.shared.util||(function(){var s=/\%[0-9][0-9]/,e=/_[0-9]+$/;function b(y){var u,w,x=document.cookie.split(";");for(var v=0;v<x.length;v++){u=x[v].substr(0,x[v].indexOf("="));w=x[v].substr(x[v].indexOf("=")+1);u=u.replace(/^\s+|\s+$/g,"");if(u===y){return decodeURIComponent(w)}}}function r(A,B,z,D,x){var u=new Date();u.setDate(u.getDate()+z);var v=encodeURIComponent(B);var w=((!z)?"":"; expires="+u.toUTCString());var y=(!D)?"":"; path="+D;var C=(!x)?"":"; domain="+x;document.cookie=A+"="+v+w+y+C}function g(v,u){r(v,"",-1,"/",u)}function h(){r("are_cookies_enabled","enabled",null,"/");if(b("are_cookies_enabled")==="enabled"){g("are_cookies_enabled");return true}else{return false}}function p(){g("ui-proxy-path","."+window.location.host);g("ui-proxy-path")}function d(v){var u=encodeURIComponent(v).match(/%[89ABab]/g);return v.length+(u?u.length:0)}function n(w,u){var x=w.substring(0,w.length),y=d(x);for(var v=w.length-1;v>=0&&y>u;v--){x=w.substring(0,v);y=d(x)}return x}function k(v,w,u){if(v.addEventListener){v.addEventListener(w,u)}else{if(v.attachEvent){v.attachEvent("on"+w,u)}}}function a(x,v){var u="";function w(){u=x.value;if(RAINIER.shared.util.lengthInBytes(u)>v){x.value=RAINIER.shared.util.truncateToMaxBytes(u,v)}}k(x,"keyup",w);k(x,"blur",w)}function t(y,x,v,w){var u={action:"/jnap/ui/SetRemoteSetting",data:{isEnabled:x},cb:function(z){if(z.result==="OK"){if(typeof v==="function"){setTimeout(v,2500)}}}};if(w&&w.forceLocal){u.forceLocal=w.forceLocal}if(w&&w.disableDefaultAjaxErrHandler){u.disableDefaultAjaxErrHandler=w.disableDefaultAjaxErrHandler}if(w&&w.disableDefaultJnapErrHandler){u.disableDefaultJnapErrHandler=w.disableDefaultJnapErrHandler}y.send(u)}function m(u){RAINIER.jnap.send({action:"/jnap/core/IsAdminPasswordDefault",data:{},cb:function(w,v){if(w.result==="OK"){if(w.output.isAdminPasswordDefault){RAINIER.jnap.send({action:"/jnap/nodes/setup/IsAdminPasswordSetByUser",data:{},cb:function(y,x){if(y.result==="OK"){u(y.output.isAdminPasswordSetByUser)}else{}}})}else{u(true)}}else{}}})}function l(u,w){var v=(new RegExp(u+"=(.+?)(&|$)").exec(w.split("#")[0])||[,null])[1];return v?decodeURIComponent(v):v}function q(u){return l(u,location.search)}function j(u,y){var v=new RegExp("("+u+"=).*?(&|$)"),x=window.location.href,w=x.replace(v,"$1"+y+"$2");return w}function o(A){var z=RAINIER.jnapCache.get(RAINIER.jnapActions.getDeviceInfo());if(!z||!z.services){return false}var u=true,y,x,w,v;for(y=0;y<A.length&&u;y++){w=false;for(x=0;x<z.services.length;x++){v=z.services[x].replace("http://cisco.com","").replace("http://linksys.com","");if(A[y]===v){w=true;break}}u=u&&w}return u}function c(z,B){var y=null,u=null,w=[],A,x=0;for(x=0;x<z.radios.length;x++){u=z.radios[x];if(!w[u.band]){w[u.band]=1}else{w[u.band]+=1}if(!y&&u.radioID===B){y=RAINIER.shared.util.clone(u);y.labels={}}}if(z.isBandSteeringEnabled){if(z.bandSteeringMode==="TriBand"){y.labels=RAINIER.shared.util.clone(RAINIER.ui.shared.strings.bandSteering.TriBand)}if(z.bandSteeringMode==="Basic"){if(y.band==="5GHz"){y.labels=RAINIER.shared.util.clone(RAINIER.ui.shared.strings.bandSteering.Basic)}else{if(y.band==="2.4GHz"){y.labels=RAINIER.shared.util.clone(RAINIER.ui.shared.strings.bands["2.4"])}}}}else{if(RAINIER.network.isBehindNode()&&window.location.hash!=="#casupport"){if(z.combineNetworks){y.labels=RAINIER.shared.util.clone(RAINIER.ui.shared.strings.velop.twoRadios)}else{if(y.band==="5GHz"){y.labels=RAINIER.shared.util.clone(RAINIER.ui.shared.strings.bands["5"])}else{if(y.band==="2.4GHz"){y.labels=RAINIER.shared.util.clone(RAINIER.ui.shared.strings.bands["2.4"])}}}}else{if(y.band==="2.4GHz"){y.labels=RAINIER.shared.util.clone(RAINIER.ui.shared.strings.bands["2.4"])}else{if(y.band==="5GHz"){if(w[y.band]>1){var C=1,v="";A=y.radioID.match(e);y.labels=RAINIER.shared.util.clone(RAINIER.ui.shared.strings.bands["5-indexed"]);if(A){C=A.toString().substr(1)}for(x=0;x<RAINIER.ui.shared.radioLabelSet.length;x++){v=RAINIER.ui.shared.radioLabelSet[x];y.labels[v]=y.labels[v].replace("{0}",C)}}else{y.labels=RAINIER.ui.shared.strings.bands["5"]}}}}}return y}function i(u){RAINIER.jnap.send({action:RAINIER.jnapActions.getDeviceInfo(),data:{},cb:function(w){var v=false;if(w.result==="OK"){v=_.find(w.output.services,function(x){return x.indexOf("/jnap/nodes/")!==-1})}u(v)}})}return{getCiscoHNClientID:function(){return"BB426FA7-16A9-5C1C-55AF-63A4167B26AD"},getCurrentNetworkID:function(){return b("current-network-id")?b("current-network-id"):null},setCurrentNetworkID:function(u){return r("current-network-id",u,null,"/")},clearUIProxyPathCookie:p,setUIProxyPathCookie:function(u){g("ui-proxy-path","."+window.location.host);r("ui-proxy-path",u,null,"/")},signOutCookies:function(){g("admin-auth");g("user-auth-token");g("current-network-id");g("current-applet");p()},isAlphaNumeric:function(v){for(var u=0;u<v.length;u++){if(/[a-zA-Z0-9]/.test(v.charAt(u))===false){return false}}return true},isAscii:function(w){for(var u=0;u<w.length;u++){var v=w.charCodeAt(u);if(v<32||v>126){return false}}return true},isValidEmail:function(u){return null!==u.match(/^[0-9a-z$&'*+-=^_`.{|}~]+@[0-9a-z.-]+\.[a-z]{2,4}$/i)},lengthInBytes:d,truncateToMaxBytes:n,limitUTF8Field:a,ssidAppend:function(w,v){var u=32-(d(v));return n(w,u)+v},formatGuestSsid:function(v,u){return RAINIER.shared.util.ssidAppend(v,"-"+u)},getURLParameterFromQueryString:l,getURLParameter:q,replaceURLParameter:j,getEncodedURLParameter:function(u){var v=0,w=q(u);while(s.test(w)){w=decodeURIComponent(w);if(v===10){break}v++}return w},beginsOrEndsWithSpace:function(u){if(u.charAt(0)===" "||u.charAt(u.length-1)===" "){return true}return false},isAdminPasswordValid:function(u){if(u.length<1||u.length>64||!RAINIER.shared.util.isAscii(u)||RAINIER.shared.util.beginsOrEndsWithSpace(u)){return false}return true},clone:function(u){return JSON.parse(JSON.stringify(u))},uniqueURL:function f(u){return u+"?"+(new Date()).getTime()},getCookie:b,setCookie:r,deleteCookie:g,areCookiesEnabled:h,areServicesSupported:o,decodeHtml:function(v){var u=document.createElement("div");u.innerHTML=v;return u.firstChild.nodeValue},setRemoteSetting:t,checkIfNodeConfigured:m,getLabeledRadio:c,checkIsBehindNode:i}}());RAINIER.jnapCache=(function(){var a={};function b(d){return a[d]}function c(d,e){a[d]=e}return{get:b,set:c}}());RAINIER.jnapActions=(function(){function v(){if(RAINIER.shared.util.areServicesSupported(["/jnap/core/Core3"])){return"/jnap/core/SetAdminPassword2"}return"/jnap/core/SetAdminPassword"}function s(){if(RAINIER.shared.util.areServicesSupported(["/jnap/router/Router8"])){return"/jnap/router/GetWANSettings4"}if(RAINIER.shared.util.areServicesSupported(["/jnap/router/Router3"])){return"/jnap/router/GetWANSettings2"}return"/jnap/router/GetWANSettings"}function i(){if(RAINIER.shared.util.areServicesSupported(["/jnap/router/Router8"])){return"/jnap/router/SetWANSettings4"}if(RAINIER.shared.util.areServicesSupported(["/jnap/router/Router4"])){return"/jnap/router/SetWANSettings3"}if(RAINIER.shared.util.areServicesSupported(["/jnap/router/Router3"])){return"/jnap/router/SetWANSettings2"}return"/jnap/router/SetWANSettings"}function m(){if(RAINIER.shared.util.areServicesSupported(["/jnap/router/Router5"])){return"/jnap/router/GetWANStatus3"}else{if(RAINIER.shared.util.areServicesSupported(["/jnap/router/Router3"])){return"/jnap/router/GetWANStatus2"}}return"/jnap/router/GetWANStatus"}function q(){if(RAINIER.shared.util.areServicesSupported(["/jnap/router/Router5"])){return"/jnap/router/GetIPv6Settings2"}return"/jnap/router/GetIPv6Settings"}function u(){if(RAINIER.shared.util.areServicesSupported(["/jnap/router/Router5"])){return"/jnap/router/SetIPv6Settings2"}return"/jnap/router/SetIPv6Settings"}function p(){if(RAINIER.shared.util.areServicesSupported(["/jnap/router/broadcom/RouterBroadcom"])){return"/jnap/router/broadcom/GetCTFSettings"}return"/jnap/router/GetCTFSettings"}function o(){if(RAINIER.shared.util.areServicesSupported(["/jnap/router/broadcom/RouterBroadcom"])){return"/jnap/router/broadcom/SetCTFSettings"}return"/jnap/router/SetCTFSettings"}function j(){return"/jnap/router/GetExpressForwardingSettings"}function g(){return"/jnap/router/SetExpressForwardingSettings"}function l(){return"/jnap/router/GetRoutingSettings"}function t(){return"/jnap/router/SetRoutingSettings"}function k(){if(RAINIER.shared.util.areServicesSupported(["/jnap/networkconnections/NetworkConnections2"])){return"/jnap/networkconnections/GetNetworkConnections2"}return"/jnap/networkconnections/GetNetworkConnections"}function h(){return"/jnap/core/GetDeviceInfo"}function d(){if(RAINIER.shared.util.areServicesSupported(["/jnap/devicelist/DeviceList4"])){return"/jnap/devicelist/GetDevices3"}return"/jnap/devicelist/GetDevices"}function x(){if(RAINIER.shared.util.areServicesSupported(["/jnap/wirelessap/WirelessAP4"])){return"/jnap/wirelessap/GetRadioInfo3"}else{if(RAINIER.shared.util.areServicesSupported(["/jnap/wirelessap/WirelessAP3"])){return"/jnap/wirelessap/GetRadioInfo2"}}return"/jnap/wirelessap/GetRadioInfo"}function c(){if(RAINIER.shared.util.areServicesSupported(["/jnap/guestnetwork/GuestNetwork4"])){return"/jnap/guestnetwork/GetGuestRadioSettings2"}if(RAINIER.shared.util.areServicesSupported(["/jnap/guestnetwork/GuestNetwork3"])){return"/jnap/guestnetwork/GetGuestRadioSettings"}return"/jnap/guestnetwork/GetGuestNetworkSettings"}function f(){if(RAINIER.shared.util.areServicesSupported(["/jnap/guestnetwork/GuestNetwork4"])){return"/jnap/guestnetwork/SetGuestRadioSettings2"}if(RAINIER.shared.util.areServicesSupported(["/jnap/guestnetwork/GuestNetwork3"])){return"/jnap/guestnetwork/SetGuestRadioSettings"}return"/jnap/guestnetwork/SetGuestNetworkSettings"}function b(){if(RAINIER.shared.util.areServicesSupported(["/jnap/wirelessap/WirelessAP4"])){return"/jnap/wirelessap/SetRadioSettings3"}else{if(RAINIER.shared.util.areServicesSupported(["/jnap/wirelessap/WirelessAP3"])){return"/jnap/wirelessap/SetRadioSettings2"}}return"/jnap/wirelessap/SetRadioSettings"}function n(){if(RAINIER.shared.util.areServicesSupported(["/jnap/ddns/DDNS3"])){return"/jnap/ddns/GetDDNSStatus2"}return"/jnap/ddns/GetDDNSStatus"}function r(){if(RAINIER.shared.util.areServicesSupported(["/jnap/routermanagement/RouterManagement2"])){return"/jnap/routermanagement/GetManagementSettings2"}return"/jnap/routermanagement/GetManagementSettings"}function a(){if(RAINIER.shared.util.areServicesSupported(["/jnap/routermanagement/RouterManagement2"])){return"/jnap/routermanagement/SetManagementSettings2"}return"/jnap/routermanagement/SetManagementSettings"}function w(){if(RAINIER.shared.util.areServicesSupported(["/jnap/vlantagging/VLANTagging3"])){return"/jnap/vlantagging/GetVLANTaggingSettings3"}else{if(RAINIER.shared.util.areServicesSupported(["/jnap/vlantagging/VLANTagging2"])){return"/jnap/vlantagging/GetVLANTaggingSettings2"}}return"/jnap/vlantagging/GetVLANTaggingSettings"}function e(){if(RAINIER.shared.util.areServicesSupported(["/jnap/vlantagging/VLANTagging3"])||RAINIER.shared.util.areServicesSupported(["/jnap/vlantagging/VLANTagging2"])){return"/jnap/vlantagging/SetVLANTaggingSettings2"}return"/jnap/vlantagging/SetVLANTaggingSettings"}return{setAdminPassword:v,getCTFSettings:p,setCTFSettings:o,getExpressForwardingSettings:j,setExpressForwardingSettings:g,getWANSettings:s,setWANSettings:i,getWANStatus:m,getIPv6Settings:q,setIPv6Settings:u,getRoutingSettings:l,setRoutingSettings:t,getNetworkConnections:k,getDeviceInfo:h,getDevices:d,getRadioInfo:x,setRadioSettings:b,getGuestRadioSettings:c,setGuestRadioSettings:f,getDDNSStatus:n,getManagementSettings:r,setManagementSettings:a,getVLANTaggingSettings:w,setVLANTaggingSettings:e}}());